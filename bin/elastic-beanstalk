#!/usr/bin/env ruby

require 'rake'
require 'bundler'
require 'pp'

raise "Bundler is required.  Please install bundler with 'gem install bundler'" unless defined?(Bundler)

#
# Example:
#
#   elastic-beanstalk eb:show_config
#   elastic-beanstalk eb:show_config[1.1.1]
#
gem_dir = File.expand_path('..',File.dirname(__FILE__))

# init dependencies
#pwd=Dir.pwd
#Dir.chdir("#{gem_dir}")
Bundler.setup
#Dir.chdir(pwd) # Revert to original pwd

# init rake
Rake.application.init

# load the rake tasks
load "#{gem_dir}/lib/elastic/beanstalk/tasks/eb.rake"

# invoke the given task
Rake.application.invoke_task(ARGV[0])